<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src ="moment.js"></script>
    <title>Twittler</title>
    <style type="text/css">
      a {
        color: blue;
      }
      a, input[type='submit'], input[type='image'], label[for], select, button, .pointer {
       cursor: pointer;
}

    </style>
  </head>
  <body>
    <script>
      $(document).ready(function(){
        var $body = $('body');
        
        var tweets;

        var loadTimeline =  function(){
          $body.html('');
          var index = streams.home.length - 1;
          tweets = index;
          
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message + " -- " + moment(tweet.created_at).fromNow());
            $tweet.appendTo($body);
            index -= 1;
          };
        };

        loadTimeline();

        setInterval(function(){
          if(tweets < streams.home.length -1){
            $("a").remove();
            var $load = $('<a></a>');
            $load.text("Load more tweets");
            $load.prependTo($body);

            $("a").on("click", function(){
              loadTimeline();
            });
          }
        }, 3000);



      });

    </script>
  </body>
</html>
